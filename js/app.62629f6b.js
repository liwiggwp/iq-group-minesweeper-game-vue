(function(){"use strict";var e={1854:function(e,t,i){var s=i(5130),n=i(6768);const o={id:"app"};function r(e,t,i,s,r,a){const l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",o,[(0,n.bF)(l)])}var a={name:"App"},l=i(1241);const u=(0,l.A)(a,[["render",r]]);var d=u,c=i(1387),m=i(4232),h=i.p+"img/main.cb75a1ff.png";const p={class:"difficulty"},g={class:"input-group"},f={class:"input-group"},b={class:"input-group"};function v(e,t,i,o,r,a){const l=(0,n.g2)("CustomButton"),u=(0,n.g2)("DialogMessage"),d=(0,n.g2)("LayoutContainer");return(0,n.uX)(),(0,n.Wv)(d,null,{"sidebar-left":(0,n.k6)((()=>[t[9]||(t[9]=(0,n.Lk)("img",{src:h,class:"main-image"},null,-1)),(0,n.Lk)("table",null,[t[8]||(t[8]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"Игрок"),(0,n.Lk)("th",null,"Время")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.leaders,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",null,(0,m.v_)(e.player),1),(0,n.Lk)("td",null,(0,m.v_)(a.formatTime(e.time)),1)])))),128))])]),t[10]||(t[10]=(0,n.Lk)("h3",null,"Топ 3 лидера",-1))])),default:(0,n.k6)((()=>[t[14]||(t[14]=(0,n.Lk)("h1",null,"Выбор уровня сложности",-1)),(0,n.Lk)("div",p,[(0,n.bF)(l,{onClick:t[0]||(t[0]=e=>a.startGame("easy")),width:"100%"},{default:(0,n.k6)((()=>t[11]||(t[11]=[(0,n.eW)(" Простой (8x8, 10 мин) ")]))),_:1}),(0,n.bF)(l,{onClick:t[1]||(t[1]=e=>a.startGame("medium")),width:"100%"},{default:(0,n.k6)((()=>t[12]||(t[12]=[(0,n.eW)(" Средний (16x16, 40 мин) ")]))),_:1}),(0,n.bF)(l,{onClick:t[2]||(t[2]=e=>a.startGame("hard")),width:"100%"},{default:(0,n.k6)((()=>t[13]||(t[13]=[(0,n.eW)(" Сложный (32x16, 100 мин) ")]))),_:1})]),(0,n.bF)(u,{visible:r.dialogVisible,message:r.dialogMessage,isWin:!1,timer:0,onClose:t[3]||(t[3]=e=>r.dialogVisible=!1)},null,8,["visible","message"])])),"sidebar-right":(0,n.k6)((()=>[t[19]||(t[19]=(0,n.Lk)("h2",null,"Кастомный режим",-1)),(0,n.Lk)("form",{onSubmit:t[7]||(t[7]=(0,s.D$)(((...e)=>a.startCustomGame&&a.startCustomGame(...e)),["prevent"])),class:"custom-mode"},[(0,n.Lk)("div",g,[t[15]||(t[15]=(0,n.Lk)("p",null,"Строки",-1)),(0,n.bo)((0,n.Lk)("input",{id:"rows",type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>r.customRows=e),min:"5",max:"50",required:""},null,512),[[s.Jo,r.customRows,void 0,{number:!0}]])]),(0,n.Lk)("div",f,[t[16]||(t[16]=(0,n.Lk)("p",null,"Столбцы",-1)),(0,n.bo)((0,n.Lk)("input",{id:"cols",type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>r.customCols=e),min:"5",max:"50",required:""},null,512),[[s.Jo,r.customCols,void 0,{number:!0}]])]),(0,n.Lk)("div",b,[t[17]||(t[17]=(0,n.Lk)("p",null,"Мины",-1)),(0,n.bo)((0,n.Lk)("input",{id:"mines",type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>r.customMines=e),min:"1",required:""},null,512),[[s.Jo,r.customMines,void 0,{number:!0}]])]),(0,n.bF)(l,{type:"submit",width:"50%"},{default:(0,n.k6)((()=>t[18]||(t[18]=[(0,n.eW)("Начать игру")]))),_:1})],32)])),_:1})}i(4114);function k(e,t,i,s,o,r){return(0,n.uX)(),(0,n.CE)("button",{class:(0,m.C4)(["custom-button",i.variant]),style:(0,m.Tr)({width:i.width})},[(0,n.RG)(e.$slots,"default")],6)}var C={props:{width:{type:String,default:"100%"},variant:{type:String,default:"contained"}}};const y=(0,l.A)(C,[["render",k]]);var L=y;const M={class:"container"},_={class:"top-row"},w={class:"sidebar-left"},E={class:"content"},F={class:"sidebar-right"},G={class:"board-container"};function T(e,t){return(0,n.uX)(),(0,n.CE)("div",M,[(0,n.Lk)("div",_,[(0,n.Lk)("div",w,[(0,n.RG)(e.$slots,"sidebar-left",{},void 0,!0)]),(0,n.Lk)("div",E,[(0,n.RG)(e.$slots,"default",{},void 0,!0)]),(0,n.Lk)("div",F,[(0,n.RG)(e.$slots,"sidebar-right",{},void 0,!0)])]),(0,n.Lk)("div",G,[(0,n.RG)(e.$slots,"board",{},void 0,!0)])])}const W={},$=(0,l.A)(W,[["render",T],["__scopeId","data-v-f4d531d0"]]);var O=$,X=i.p+"img/win.b6ed994c.png",q=i.p+"img/lose.cc550994.png";const I={key:0,class:"dialog-container"},A={class:"dialog-box"},B={key:0,src:X,class:"dialog-image"},S={key:1,src:q,class:"dialog-image"},R={class:"dialog-title"},x={key:2};function D(e,t,i,o,r,a){const l=(0,n.g2)("CustomButton");return i.visible?((0,n.uX)(),(0,n.CE)("div",I,[(0,n.Lk)("div",A,[(0,n.Lk)("button",{class:"close-button",onClick:t[0]||(t[0]=e=>a.onClose())},"×"),i.isWin?((0,n.uX)(),(0,n.CE)("img",B)):((0,n.uX)(),(0,n.CE)("img",S)),(0,n.Lk)("h2",R,(0,m.v_)(i.message),1),i.isWin?((0,n.uX)(),(0,n.CE)("p",x,"Ваше время: "+(0,m.v_)(i.timer)+" сек.",1)):(0,n.Q3)("",!0),i.isWin?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:3,"onUpdate:modelValue":t[1]||(t[1]=e=>r.playerName=e),type:"text",class:"player-name-input",placeholder:"Введите ваше имя"},null,512)),[[s.Jo,r.playerName]]):(0,n.Q3)("",!0),(0,n.bF)(l,{variant:"outlined",width:"50%",onClick:t[2]||(t[2]=e=>a.saveResult())},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" Закрыть ")]))),_:1})])])):(0,n.Q3)("",!0)}var N={components:{CustomButton:L},props:{visible:{type:Boolean,required:!0},message:{type:String,required:!0},isWin:{type:Boolean,required:!0},timer:{type:Number,required:!0}},data(){return{playerName:""}},methods:{onClose(){this.$emit("close")},saveResult(){if(this.isWin&&this.playerName){const e={player:this.playerName,time:this.timer};this.$store.commit("ADD_LEADER",e)}this.onClose()}}};const V=(0,l.A)(N,[["render",D],["__scopeId","data-v-646a1d1e"]]);var U=V;function j(e){const t=Math.floor(e/60),i=e%60;return`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}var J={components:{CustomButton:L,LayoutContainer:O,DialogMessage:U},data(){return{customRows:10,customCols:10,customMines:10,dialogVisible:!1,dialogMessage:"",leaders:[]}},mounted(){this.leaders=this.$store.getters.TOPLEADERS.slice(0,3)},methods:{startGame(e){this.$router.push({path:"/game",query:{difficulty:e}})},startCustomGame(){if(this.customMines>=this.customRows*this.customCols)return this.dialogMessage="Количество мин должно быть меньше, чем количество ячеек!",void(this.dialogVisible=!0);this.$router.push({path:"/game",query:{rows:this.customRows,cols:this.customCols,mines:this.customMines}})},formatTime:j}};const Q=(0,l.A)(J,[["render",v],["__scopeId","data-v-38088ff0"]]);var K=Q,P=i.p+"img/mine.dfbef43b.png",H=i.p+"img/flag.c4833495.png",z=i.p+"img/question.32bf477d.png";const Y={class:"board"},Z=["onClick","onContextmenu"],ee={key:0,src:P,class:"mine-image"},te={key:1,src:H,class:"flag-image"},ie={key:2,src:z,class:"question-image"};function se(e,t,i,o,r,a){const l=(0,n.g2)("CustomButton"),u=(0,n.g2)("GameTimer"),d=(0,n.g2)("GameMineCounter"),c=(0,n.g2)("DialogMessage"),h=(0,n.g2)("LayoutContainer");return(0,n.uX)(),(0,n.Wv)(h,null,{"sidebar-left":(0,n.k6)((()=>[(0,n.bF)(l,{onClick:t[0]||(t[0]=t=>e.$router.push("/")),width:"60%"},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)(" Вернуться к настройкам ")]))),_:1}),(0,n.bF)(l,{onClick:t[1]||(t[1]=e=>a.restartGame()),width:"60%"},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)(" Перезапустить игру ")]))),_:1})])),default:(0,n.k6)((()=>[(0,n.bF)(u,{ref:"gameTimer",initStart:!0,"onUpdate:time":a.updateTimer},null,8,["onUpdate:time"])])),"sidebar-right":(0,n.k6)((()=>[(0,n.bF)(d,{counterMines:r.counterMines},null,8,["counterMines"])])),board:(0,n.k6)((()=>[(0,n.Lk)("div",Y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.board,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,((e,i)=>((0,n.uX)(),(0,n.CE)("div",{key:i,class:"cell",onClick:e=>a.openCell(t,i),onContextmenu:(0,s.D$)((e=>a.flagCell(t,i)),["prevent"]),style:(0,m.Tr)({backgroundColor:e.isOpen?"#fff":"#ccc",color:r.colors[e.countMines]})},[(0,n.eW)((0,m.v_)(e.isOpen&&e.countMines>0?e.countMines:"")+" ",1),e.isMine&&e.isOpen?((0,n.uX)(),(0,n.CE)("img",ee)):(0,n.Q3)("",!0),"flag"!==e.isFlag||e.isOpen?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("img",te)),"question"!==e.isFlag||e.isOpen?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("img",ie))],44,Z)))),128))])))),128))]),(0,n.bF)(c,{visible:r.dialogVisible,message:r.dialogMessage,onClose:t[2]||(t[2]=e=>r.dialogVisible=!1),isWin:r.isWin,timer:r.timer},null,8,["visible","message","isWin","timer"])])),_:1})}const ne={1:"blue",2:"green",3:"red",4:"darkblue",5:"brown",6:"turquoise",7:"black",8:"white"};var oe=ne;const re={class:"timer"};function ae(e,t,i,s,o,r){return(0,n.uX)(),(0,n.CE)(n.FK,null,[t[0]||(t[0]=(0,n.Lk)("h2",null,"Время:",-1)),(0,n.Lk)("div",re,(0,m.v_)(r.formattedTime),1)],64)}var le={props:{initStart:{type:Boolean,default:!0}},data(){return{seconds:0,timerInterval:null}},computed:{formattedTime(){return j(this.seconds)}},methods:{startTimer(){this.timerInterval||(this.timerInterval=setInterval((()=>{this.seconds++,this.$emit("update:time",this.seconds)}),1e3))},stopTimer(){clearInterval(this.timerInterval),this.timerInterval=null},resetTimer(){this.stopTimer(),this.seconds=0}},mounted(){this.initStart&&this.startTimer()},beforeUnmount(){this.stopTimer()}};const ue=(0,l.A)(le,[["render",ae],["__scopeId","data-v-4fb2d94c"]]);var de=ue;const ce={class:"mine-counter"},me={class:"mine-text"};function he(e,t,i,s,o,r){return(0,n.uX)(),(0,n.CE)("div",ce,[t[1]||(t[1]=(0,n.Lk)("div",{class:"mine-icon-container"},[(0,n.Lk)("img",{src:P,class:"mine-icon"})],-1)),(0,n.Lk)("div",me,[t[0]||(t[0]=(0,n.Lk)("p",null,"Осталось мин:",-1)),(0,n.Lk)("p",null,(0,m.v_)(i.counterMines),1)])])}var pe={props:{counterMines:{type:Number,required:!0}}};const ge=(0,l.A)(pe,[["render",he],["__scopeId","data-v-286a439d"]]);var fe=ge,be={components:{CustomButton:L,DialogMessage:U,LayoutContainer:O,GameTimer:de,GameMineCounter:fe},data(){return{board:[],counterMines:0,isGameover:!1,colors:oe,dialogVisible:!1,dialogMessage:"",isWin:!1,timer:0,firstClick:!1,difficultySettings:{easy:{rows:8,cols:8,mines:10},medium:{rows:16,cols:16,mines:40},hard:{rows:16,cols:32,mines:100}}}},methods:{createEmptyBoard(e,t){return Array.from({length:e},(()=>Array.from({length:t},(()=>({isMine:!1,isOpen:!1,isFlag:null,countMines:0})))))},initBoard(){const e=parseInt(this.$route.query.rows)||null,t=parseInt(this.$route.query.cols)||null,i=parseInt(this.$route.query.mines)||null;if(e&&t&&i)this.counterMines=i,this.board=this.createEmptyBoard(e,t);else{const e=this.$route.query.difficulty||"easy",{rows:t,cols:i,mines:s}=this.difficultySettings[e];this.counterMines=s,this.isGameover=!1,this.board=this.createEmptyBoard(t,i)}this.firstClick=!1},initMines(e,t,i){let s=0;while(s<e){const e=Math.floor(Math.random()*this.board.length),n=Math.floor(Math.random()*this.board[0].length);this.board[e][n].isMine||e===t&&n===i||(this.board[e][n].isMine=!0,s++)}},openCell(e,t){if(this.isGameover||this.board[e][t].isOpen||"flag"===this.board[e][t].isFlag)return;this.firstClick||(this.initMines(this.counterMines,e,t),this.countNeighbourMines(),this.firstClick=!0);const i=this.board[e][t];i.isOpen=!0,i.isMine?this.stopGame(!1,"Вы проиграли!"):(0===i.countMines&&this.openNeighbourCells(e,t),this.isWinGame())},flagCell(e,t){if(!this.firstClick||this.isGameover)return;const i=this.board[e][t];i.isOpen||(i.isFlag?"flag"===i.isFlag?(i.isFlag="question",this.counterMines++):"question"===i.isFlag&&(i.isFlag=null):this.counterMines>0?(i.isFlag="flag",this.counterMines--):i.isFlag="question",this.isWinGame())},isCellBoard(e,t){return e>=0&&t>=0&&e<this.board.length&&t<this.board[0].length},countNeighbourMines(){for(let e=0;e<this.board.length;e++)for(let t=0;t<this.board[e].length;t++){if(this.board[e][t].isMine)continue;let i=0;for(let s=e-1;s<=e+1;s++)for(let e=t-1;e<=t+1;e++)this.isCellBoard(s,e)&&this.board[s][e].isMine&&i++;this.board[e][t].countMines=i}},openNeighbourCells(e,t){for(let i=e-1;i<=e+1;i++)for(let s=t-1;s<=t+1;s++)if(this.isCellBoard(i,s)&&(i!==e||s!==t)){const e=this.board[i][s];e.isOpen||e.isMine||this.openCell(i,s)}},isWinGame(){let e=!0,t=!0;for(let i of this.board)for(let s of i)"flag"!==s.isFlag&&(e=!1),s.isMine||s.isOpen||(t=!1);(e&&0===this.counterMines||t)&&this.stopGame(!0,"Поздравляем! Вы победили!")},stopGame(e,t){this.isGameover=!0,this.dialogMessage=t,this.isWin=e,this.dialogVisible=!0,this.$refs.gameTimer.stopTimer()},updateTimer(e){this.timer=e},restartGame(){this.initBoard(),this.$refs.gameTimer.resetTimer(),this.$refs.gameTimer.startTimer()}},created(){this.initBoard()}};const ve=(0,l.A)(be,[["render",se],["__scopeId","data-v-123d987e"]]);var ke=ve;const Ce={style:{"font-weight":"bold"}};function ye(e,t,i,s,o,r){const a=(0,n.g2)("CustomButton"),l=(0,n.g2)("LayoutContainer");return(0,n.uX)(),(0,n.Wv)(l,null,{"sidebar-left":(0,n.k6)((()=>[(0,n.bF)(a,{onClick:t[0]||(t[0]=t=>e.$router.push("/")),width:"100"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)(" Вернуться к настройкам ")]))),_:1})])),default:(0,n.k6)((()=>[t[3]||(t[3]=(0,n.Lk)("h1",null,"Таблица рекордов",-1)),(0,n.Lk)("table",null,[t[2]||(t[2]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th"),(0,n.Lk)("th",null,"Игрок"),(0,n.Lk)("th",null,"Время")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.leaders,((e,t)=>((0,n.uX)(),(0,n.CE)("tr",{key:t},[(0,n.Lk)("td",Ce,(0,m.v_)(t+1),1),(0,n.Lk)("td",null,(0,m.v_)(e.player),1),(0,n.Lk)("td",null,(0,m.v_)(e.time),1)])))),128))])])])),_:1})}var Le={components:{CustomButton:L,LayoutContainer:O},data(){return{leaders:[]}},mounted(){this.leaders=this.$store.getters.TOPLEADERS}};const Me=(0,l.A)(Le,[["render",ye],["__scopeId","data-v-6614c4f8"]]);var _e=Me;function we(e,t,i,s,o,r){const a=(0,n.g2)("CustomHeader"),l=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(a),(0,n.Lk)("main",null,[(0,n.bF)(l)])])}var Ee=i.p+"img/logo.e1b50129.png";const Fe={class:"header"};function Ge(e,t){return(0,n.uX)(),(0,n.CE)("header",Fe,[t[1]||(t[1]=(0,n.Lk)("div",{class:"logo"},[(0,n.Lk)("img",{src:Ee,class:"logo-image"}),(0,n.eW)(" Кото-сапер ")],-1)),(0,n.Lk)("nav",null,[(0,n.Lk)("button",{class:"nav-button",onClick:t[0]||(t[0]=t=>e.$router.push("/leaderboard"))}," Таблица лидеров ")])])}const Te={},We=(0,l.A)(Te,[["render",Ge]]);var $e=We,Oe={components:{CustomHeader:$e}};const Xe=(0,l.A)(Oe,[["render",we]]);var qe=Xe,Ie=i.p+"img/error404.f93b9026.png";const Ae={class:"error404"};function Be(e,t,i,s,o,r){const a=(0,n.g2)("CustomButton");return(0,n.uX)(),(0,n.CE)("div",Ae,[t[2]||(t[2]=(0,n.Lk)("h1",null,"404",-1)),t[3]||(t[3]=(0,n.Lk)("p",null,"Страница не найдена",-1)),t[4]||(t[4]=(0,n.Lk)("img",{src:Ie,class:"error404-image"},null,-1)),(0,n.bF)(a,{onClick:t[0]||(t[0]=t=>e.$router.push("/")),width:"200px"},{default:(0,n.k6)((()=>t[1]||(t[1]=[(0,n.eW)(" Вернуться на главную ")]))),_:1})])}var Se={components:{CustomButton:L}};const Re=(0,l.A)(Se,[["render",Be],["__scopeId","data-v-66ef4298"]]);var xe=Re;const De=[{path:"/",component:qe,children:[{path:"/",component:K},{path:"/game",component:ke},{path:"/leaderboard",component:_e}]},{path:"/:pathMatch(.*)*",component:xe}],Ne=(0,c.aE)({history:(0,c.LA)("/iq-group-minesweeper-game-vue/"),routes:De});var Ve=Ne,Ue=i(782);const je={leaderboard:JSON.parse(localStorage.getItem("leaderboard"))||[]},Je={TOPLEADERS:e=>e.leaderboard},Qe={ADD_LEADER(e,t){e.leaderboard.push(t),e.leaderboard.sort(((e,t)=>e.time-t.time)),e.leaderboard=e.leaderboard.slice(0,10),localStorage.setItem("leaderboard",JSON.stringify(e.leaderboard))}};var Ke={state:je,getters:Je,mutations:Qe},Pe=(0,Ue.y$)({modules:{leaderboard:Ke}});(0,s.Ef)(d).use(Ve).use(Pe).mount("#app")}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,s,n,o){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],o=e[d][2];for(var a=!0,l=0;l<s.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(a=!1,o<r&&(r=o));if(a){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,n,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/iq-group-minesweeper-game-vue/"}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,o,r=s[0],a=s[1],l=s[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(n in a)i.o(a,n)&&(i.m[n]=a[n]);if(l)var d=l(i)}for(t&&t(s);u<r.length;u++)o=r[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},s=self["webpackChunkiq_group_minesweeper_game_vue"]=self["webpackChunkiq_group_minesweeper_game_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[504],(function(){return i(1854)}));s=i.O(s)})();
//# sourceMappingURL=app.62629f6b.js.map